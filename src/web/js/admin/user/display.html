<form ng-submit="submit()" ng-controller="manageUsers">
<table>
  <tr><th>Email</th><td>
  	<select ng-model="selectedUser" ng-options="user.email group by user.type for user in users" ng-change="changeUser()">
	  <option value="">-- Choose User --</option>
	</select>
  </td></tr>
  <tr ng-show='selectedUser'><th>First Name</th><td><input type='text' ng-model='selectedUser.firstName' /></td></tr>
  <tr ng-show='selectedUser'><th>Last Name</th><td><input type='text' ng-model='selectedUser.lastName' /></td></tr>
  <tr ng-show='selectedUser.membershipId'><th>Membership Id</th><td>{{selectedUser.membershipId}}</td></tr>
  <tr ng-show='patronages'><th>Membership Id</th><td>
  	<select ng-model="selectedPatronage" ng-options="patronage.membershipId for patronage in patronages" ng-change="changePatronage()">
	  <option value="">-- Choose Membership Id --</option>
	</select>  
  </td></tr>
  <tr ng-show='selectedUser.membershipId'><th>Active?</th><td>{{selectedUser.activePatron}}</td></tr>
  <tr ng-show='selectedPatronage'><th>Patronage Expiration</th><td><input type='text' ng-model='selectedPatronage.expiration' /></td></tr>
  <tr ng-show='selectedPatronage'><th>Username in Old Database</th><td><input type='text' ng-model='selectedPatronage.originalUsername' /></td></tr>
  <tr ng-show='selectedPatronage.payments' ng-repeat-start='payment in selectedPatronage.payments'></tr>
  <tr><th colspan=2>Payment {{$index +1}}</th></tr>
  <tr><th>Payment Date</th><td><input type='text' ng-model='payment.paymentDate' /></td></tr>
  <tr><th>Payment Type</th><td>
  	<select ng-model="payment.paymentType" ng-options="paymentType as (paymentType|payment_type) for paymentType in paymentTypes">
  		<option value="">-- Choose Payment Type --</option>
  	</select>
  </td></tr>
  <tr><td>{{payment}}</td></tr>
  <tr><td>{{paymentTypes}}</td></tr>
  <tr><th>Payment Identifier</th><td><input type='text' ng-model='payment.paymentReceiptIdentifier' /></td></tr>
  <tr ng-repeat-end><td colspan=2><a href="#" ng-click="removePayment($index)">Remove this payment</a></td></tr>
  
  <tr ng-show='selectedPatronage'><td colspan=2><hr/></td></tr>
  <tr ng-show='selectedPatronage'><th>Payment Date</th><td><input type='text' ng-model='newPayment.paymentDate' /></td></tr>
  <tr ng-show='selectedPatronage'><th>Payment Type</th><td>
  	<select ng-model="newPayment.paymentType" ng-options="paymentType.ordinal as paymentType.name for paymentType in paymentTypes">
  		<option value="">-- Choose Payment Type --</option>
  	</select>
  </td></tr>
  <tr ng-show='selectedPatronage'><th>Payment Identifier</th><td><input type='text' ng-model='newPayment.paymentReceiptIdentifier' /></td></tr>
  <tr ng-show='selectedPatronage'><td colspan=2><a href="#" ng-click="addPayment()">Add payment</a></td></tr>
</table>
<br><input name="submit" type="submit" value="submit" />
</form>
